---
sidebar: sidebar 
permalink: get-started/software-architecture.html 
keywords: afx, afx system, cluster, architecture, components, physical, logical 
summary: AFX 架構由多個硬體和軟體元件組成。這些系統組件被組織成不同的類別。 
---
= AFX儲存系統架構細節
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
AFX 架構由多個硬體和軟體元件組成。這些系統組件被組織成不同的類別。



== 實體組件

首次開始使用 AFX 時，首先從資料中心安裝的實體元件的高階視圖開始會很有幫助。



=== 控制節點

AFX 控制器節點運行ONTAP軟體的專用功能，旨在支援 AFX 環境的要求。客戶端透過多種協定存取節點，包括 NFS、SMB 和 S3。每個節點都有儲存的完整視圖，並可根據客戶端請求進行存取。這些節點具有狀態，並採用非揮發性記憶體來保存關鍵狀態信息，並包含針對目標工作負載的額外增強功能。



=== 存儲架和磁碟

AFX 儲存架使用非揮發性記憶體快速架構 (NVMe-oF) 連接高密度 SSD。磁碟使用融合乙太網路上的 RDMA (RoCE) 透過超低延遲結構進行通訊。儲存架（包括 I/O 模組、NIC、風扇和電源供應器）完全冗餘，沒有單點故障。自管理技術用於管理和控制 RAID 配置和磁碟佈局的各個方面。



=== 叢集儲存交換器網絡

冗餘和高效能交換器將 AFX 控制器節點與儲存架連接。使用先進的協定來優化效能。此設計基於具有多個網路路徑的 VLAN 標記以及技術更新配置，以確保持續運行和輕鬆升級。



=== 客戶培訓環境

客戶端訓練環境是一個實驗室環境，具有客戶提供的硬件，例如GPU叢集和AI工作站。它通常被設計用於支援模型訓練、推理和其他 AI/ML 相關工作。客戶端使用 NFS、SMB 和 S3 等行業標準協定存取 AFX。



=== 客戶網路

此內部網路將客戶端訓練環境連接到 AFX 儲存叢集。儘管NetApp希望針對需求和設計提供現場建議，但網路由客戶提供和管理。



== 邏輯元件

AFX 包含多個邏輯元件。它們與集群的物理組件一起在軟體中實現。邏輯組件強制執行決定 AFX 系統的使用和配置的結構。



=== 公共儲存池

儲存可用區 (SAZ) 是整個叢集的公共儲存池。它是儲存架上的一組磁碟，所有控制器節點都對其具有讀寫權限。 SAZ 提供了一種配置模型，對節點可以使用哪些儲存架沒有固定限制； ONTAP會自動處理跨節點的磁碟區放置。客戶可以將可用空間和儲存使用情況視為整個 AFX 叢集的屬性。



=== FlexVolume、FlexGroup 和 bucket

FlexVolumes、FlexGroups 和 S3 buckets 是基於用戶端存取協定向 AFX 管理員公開的_資料容器_。它們的操作方式與 Unified ONTAP完全相同。這些可擴展容器旨在抽象化許多複雜的內部儲存細節，例如資料放置和容量平衡。



=== 數據佈局和訪問

資料佈局和存取經過調整，可實現無縫存取和 GPU 的有效利用。這對於消除瓶頸和保持一致的性能起著至關重要的作用。



=== SVM 和多租戶

AFX 提供了一個租用戶模型，建立在AFF和FAS系統可用的 SVM 模型之上。AFX 租用戶模型與 Unified ONTAP相同，但經過簡化，可在 NAS 和 S3 物件環境中簡化管理。例如，SAN、聚合和RAID群組的配置選項已被移除。



== AFX 叢集部署

下圖說明了典型的 AFX 叢集部署。AFX 叢集包括與儲存架分離的控制器節點，這些節點透過共享的內部網路連接。在 AFX 叢集邊界之外，客戶端透過單獨的客戶端網路存取叢集。

image:afx-cluster.png["AFX 叢集架構"]
